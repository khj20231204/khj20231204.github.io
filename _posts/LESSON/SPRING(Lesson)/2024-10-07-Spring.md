---
layout: single
title: Spring
categories: SPRING(Lesson)
tag: []
author_profile: false
---

1. # Spring
   "경량 컨테이너"(크기와 부하의 측면)로서 자바 객체를 직접 관리   

   __제어의 역행(IOC : Inversion of Control)__   
   개발자가 코드의 제어 흐름을 처리하지 않고, 스프링 프레임워크가 객체의 라이프사이클 및 실행 흐름을 관리한다.   

   __의존성 주입(DI : Dependency Injection)__   
   각각의 계층이나 서비스들 간에 의존성이 존재할 경우 프레임워크가 서로 연결시켜준다.   

   __관점지향 프로그래밍(AOP : Aspect-Oriented Programming)__   
   트랜잭션이나 로깅, 보안과 같이 여러 모듈에서 공통적으로 사용하는 기능의 경우 해당 기능을 분리하여 관리할 수 있다.   

   __모델-뷰-컨트롤러 패턴__   
   웹 프로그래밍 개발시 거의 표준적인 방식인 "Spring MVC"라 불리는 모델-뷰-컨트롤러 패턴을 사용   

   Java 11 설치   
   Apache Tomcat 9 설치   
   STS 3.9.x 설치   

   톰캣을 버전이 다르게 2개 이상 사용하는 경우, 하나는 install을 하고 나머지는 압축을 풀어 사용하는 버전을 선택하면 됩니다.   
   압축되어 있는 톰캣을 다운받아 압축을 풉니다   
   <img src="../../../imgs/LESSON/SPRING(Lesson)/spring_tomcat_9.png" style="border:3px solid black;border-radius:9px;width:300px">   

   STS3를 설치 후 utf-8로 변경합니다.   
   <img src="../../../imgs/LESSON/SPRING(Lesson)/sts3_setting.png" style="border:3px solid black;border-radius:9px;width:300px">   

   *Spring MVC Project를 생성하는 과정 오류   
   <img src="../../../imgs/LESSON/SPRING(Lesson)/sts3_setting_2.png" style="border:3px solid black;border-radius:9px;width:300px">
   위에 부분에서 Spring MVC Project를 선택하고 next를 눌렀는데   
   ```
      An error has occurred. See error log for more details.
      Could not initialize class com.thoughtworks.xstream.converters.collections.PropertiesConverter
   ```
   다음과 같은 에러가 나타나는 경우   
   
   원인 : java 버전이 너무 높아서 발생하는 에러입니다.   
   
   <에러 해결 방법>
   압축 해제한 STS폴더로 들어가서 sts.ini 파일을 열어서 맨 위에 아래 2줄을 추가하고 다시 실행하면
   해결된다.
   ```
      -vm
      C:\Program Files\Java\jdk-11\bin\javaw.exe
   ```

servlet-context.xml
root-context.xml
은 자동으로 실행이 안되기 때문에 web.xml에 등록

handler mapping -> requestMapping

web.xml에 <url-pattern>/<url-pattern>
'/' 값을 받는게 handler mapping   


<img src="../../../imgs/LESSON/SPRING(Lesson)/spring_path.png" style="border:3px solid black;border-radius:9px;width:500px">   

자바 : 할당
스프링 : 주입

xml로 객체 생성을 쉽게, 의존성을 줄이면서 만드는 것 - IOC   
IOC로 만든 객체에 값을 주입하는 것(할당하는 것) - DI   

생성자로 값 주입(할당) - Construction DI   
Setter로 값 주입(할당) - Setter DI   

xml를 이용해서 객체 생성 - IOC   
생성된 객체의 생성자에 값 주입 - 생성자DI   
Setter로 값 주입 - Setter DI   

bean파일을 만들었다고 자동으로 설정되어 읽는 것이 아니라 따로 파일을 읽어들여야 메모리에 할당이 되고 실행 됨   
ApplicationContext ac = new FileSystemXmlApplicationContext("beans01.xml");

빈 간의 의존 관계를 컨테이너(=>xml파일)에서 설정하고 관리 한다는 개념   

**빈(Bean)**은 스프링 컨테이너가 관리하는 객체를 의미합니다. 더 간단히 말하면, 스프링 애플리케이션에서 사용되는 모든 객체를 빈이라고 생각하면 됩니다.
  
  resource디렉토리 classpath:beans08.xml


<img src="../../../imgs/LESSON/SPRING(Lesson)/annotation_order.png" style="border:3px solid black;border-radius:9px;width:500px">

```
   <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
		<beans:property name="prefix" value="/WEB-INF/views/" />
		<beans:property name="suffix" value=".jsp" />
	</beans:bean>	
```
setter DI : property가 setter의미, prefix변수에 "/WEB-INF/views/" 입력

prefix : view파일이 저장되어 있는 최상위 디렉토리   
suffix : view파일의 확장자

web.xml
```xml
<!-- 한글 인코딩 설정 : post방식 -->
	<filter>
		<filter-name>CharacterEncodingFilter</filter-name>
		<filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
		<init-param>
			<param-name>encoding</param-name>
			<param-value>UTF-8</param-value>
		</init-param>
		<init-param>
			<param-name>forceEncoding</param-name>
			<param-value>true</param-value>
		</init-param>
	</filter>
	<filter-mapping>
		<filter-name>CharacterEncodingFilter</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>
```

base-package : 자바 파일 저장되어 있는 최상위 디렉토리
<context:component-scan base-package="com.ch.hello" />


index.jsp파일이 없으면 실행할 때 오른쪽 마우스 -> Run as -> Run on Server

```java
   @RequestMapping("/color")
	public String color(Model model){
      ...
   }
```
@RequestMapping("/color") 애노테이션이 붙은 메서드에서 Model 객체를 매개변수로 선언하는 것은 Spring MVC에서 View에 데이터를 전달하기 위한 가장 일반적인 방법입니다.