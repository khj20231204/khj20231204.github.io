---
layout: single
title: JPA - JPQL2
categories: JPA
tab: []
---

1. # JPQL문법
   ```
      select 문 :: =
         select 절
         from 절
         [where 절]
         [group by 절]
         [having 절]
         [order by 절]

      update 문 :: = update 절 [where 절]
      delete 문 :: = delete 절 [where 절]
   ```   

   1.select m from __Member__ as m where m.__age__ > 18   
   2.엔티티와 속성은 대소문자 구분 O (Member, age)   
   3.JPQL 키워드는 대소문자 구분 X (Select, FROM, where)   
   4.엔티티 이름 사용, 테이블 이름이 아님(Member)   
   ```java
      @Entity  
      public class Member{
         ...
      }
      //=> 엔티티 이름은 Member

      @Entity(name = "M")
      public class Member{
         ...
      } 
      //=> 엔티티 이름은 M
   ```
   5.별칭은 필수(m) (as는 생략 가능)   

1. # 집합과 정렬
   ```java
      select 
         COUNT(m), //회원수
         SUM(m.age), //나이 합
         AVG(m.age), //평균 나이
         MAX(m.age), //최대 나이
         MIN(m.age) //최소 나이
      from Member m
      Group by ...
      Having ... 
      Order by ...
   ```   
   SQL문과 같이 모두 사용 가능   

1. # TypeQuery, Query
   TypeQuery : 반환타입이 명확할 때 사용   
   ```
      TypeQuery<Member> query = em.createQuery("Select m from Member m", Member.class);
   ```   
   반환타입이 Member의 전체로 Member클래스가 된다. Member.class   

   Query : 반환 타입이 명확하지 않을 때 사용   
   ```
      Query query = em.createQuery("Select m.username, m.age from Member m")
   ```   
   반환타입이 username은 String, age는 int가 된다. 반환타입이 다를 때 사용   

