---
layout: single
title: redux사용하기
categories: REACT
tab: 
---

1. # Redux 사용하기
   Redux를 사용하면 컴포넌트들이 props없이 state를 공유가능합니다. redux의 store에 state를 저장한 후 component들이 그 state를 가져다가 사용합니다.   

1. # package.json파일   
   ```cs
      "react": "^18.3.1",
      "react-dom": "^18.3.1",
   ```   
   react와 react-dom의 버전이 18.1 이상여야 합니다.   

   만약 버젼이 낮다면 package.json파일에서    
    ```cs
      "react": "^18.3.1",
      "react-dom": "^18.3.1",
   ```   
   직접 버젼을 18.3.1로 수정한 다음 파일저장하고 터미널에서 npm install 누르면 됩니다.   

1. # redux설치   
   ```js
      npm install @reduxjs/toolkit@1.8.1 react-redux
   ```   

1. # store파일 생성   
   redux를 사용하면 store라는 이름의 파일을 생성한 후 state를 저장합니다.   

   store.js파일을 임시로 생성합니다.   
   ```js
      import { configureStore } from '@reduxjs/toolkit'

      export default configureStore({
      reducer: { }
      }) 
   ```   

1. # index.js에 store선언

   index.js파일
   ```javascript
      import {Provider} from "react-redux"; //react-redux import
      import store from './store.js';  //store.js파일 import

      <Provider store={store}>
   ```
   를 입력합니다.   

   전체파일   
   ```javascript
      import {Provider} from "react-redux";
      import store from './store.js';

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(
         <Provider store={store}>  //Provider추가
            <BrowserRouter>
               <App />
            </BrowserRouter>
         </Provider>                //Provider추가
      );

      reportWebVitals();
   ```
   
1. # store에 값 생성

   store.js
   ```javascript
      import { configureStore, createSlice } from '@reduxjs/toolkit'

      let user = createSlice({ //useState 비슷한 용도, 리덕스 변수명 user
         /*
         name : 'state이름',
         initialState : '값'*/
         name : 'user',
         initialState : 'kim' //S는 대문자, 변수명.user로 kim을 가져온다
      })

      let stock = createSlice({ //리덕스 변수명 stock
         name : 'user2',
         initialState : [10,11,12]
      })

      export default configureStore({
         reducer: { 
            user :  user.reducer,
            stock : stock.reducer
         }
      }) 
   ```

1. # 데이터 사용하기
   Cart.js

   ```javascript
      import { useSelector } from "react-redux"  //import해야 됨

      function Cart(){

         //Redux store 가져와줌
         let temp = useSelector((state) => {return state}) 

         console.log(temp.user); 
         console.log(temp.stock);
      ...
      }
   ```


